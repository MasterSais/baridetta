export const V_INT="integer";export const V_EQ="equal";export const V_NEQ="notEqual";export const V_GTE="gte";export const V_LTE="lte";export const V_OOF="oneOf";export const V_LEN="len";export const V_MXLEN="maxLen";export const V_MNLEN="minLen";export const V_FIELDS="fields";export const V_NUM="number";export const V_STR="string";export const V_BLN="bool";export const V_ARR="array";export const V_OBJ="object";const e=e=>null==e||""===e,t=e=>Array.isArray(e)?e:[e],o=(e,t)=>e&&{...e,path:e.path.concat(t?[t]:[])},n=(e,t,o=[])=>e&&{...e,params:o,validator:t},r=(e,t,o)=>o?o._deps[t]=e:e,l=(e,t)=>t&&t._deps[e]||null,c=(e,t,o)=>(t&&t(e,o),null),s=e=>{throw e},p=(e,t)=>typeof e==typeof t,u=e=>Number.isFinite(e),x=e=>"string"==typeof e,a=e=>"boolean"==typeof e,i=e=>"function"==typeof e,_=e=>"object"==typeof e,V=e=>e&&"object"==typeof e&&e.constructor===Object,d=e=>Array.isArray(e),f=e=>e.reduce((e,t)=>e&&i(t),!0);export const consecutive=(...e)=>(t,o,n)=>e.reduce((e,t)=>null!==e?t(e,o,n):null,t);export const getDep=(e,o)=>(n,r,c)=>t(o(l(e,c))).reduce((e,t)=>null!==e?t(e,r,c):null,n);export const mergeDep=e=>(t,o,n)=>l(e,n);export const or=(...e)=>(t,o,n)=>{let r=null;const l={value:!1};return e.find(e=>(r=e(t,o?(e,t)=>o(e,t,l):null,n),null!==r)),null===r&&(l.value=!0),r};export const parallel=(...e)=>(t,o,n)=>e.reduce((e,r)=>null!==e?r(e,o,n):(r(t,o,n),null),t);export const setDep=e=>(t,o,n)=>r(t,e,n);export const setVDep=(e,...t)=>(o,n,l)=>(r(t,e,l),t.reduce((e,t)=>null!==e?t(e,n,l):null,o));export const transform=(...e)=>(t,o,n)=>e.reduce((e,t)=>t(e,o,n),t);export const useDefault=(t,...o)=>(n,r,l)=>e(n)?i(t)?t(l):t:o.reduce((e,t)=>null!==e?t(e,r,l):null,n);export const array=(e,r)=>{const l=t(e),p=f(l);if(!e||p){const e=p&&consecutive(...l);return(t,l,s)=>d(t)?e?t.map((t,n)=>e(t,l,o(s,n))):t:c(r,l,n(s,V_ARR,[t]))}return s(V_ARR)};const g=[!1,!0,0,1,"0","1","false","true"];export const bool=e=>(t,o,r)=>{const l=g.indexOf(t);return l>=0?!!(l%2):c(e,o,n(r,V_BLN))};export const equal=(e,t)=>(o,r,l)=>o===e?o:c(t,r,n(l,V_EQ,[e]));const h={op:(t,o)=>o.reduce((o,n)=>o+Number(x(n)?!e(t[n]):h[n[0]](t,n.slice(1))),0),"&":(e,t)=>h.op(e,t)===t.length,"|":(e,t)=>h.op(e,t)>0,"^":(e,t)=>1===h.op(e,t)},m=e=>["&","|","^"].indexOf(e)>=0,N=e=>x(e)&&e.length>0&&!m(e)||d(e)&&e.length>2&&m(e[0])&&e.reduce((e,t,o)=>0===o||e&&N(t),!0);export const fields=(e,t)=>N(e)?(o,r,l)=>V(o)&&h.op(o,[e])>0?o:c(t,r,n(l,"fields",[e])):s("fields");export const gte=(e,t)=>u(e)||x(e)||a(e)?(o,r,l)=>p(o,e)&&o>=e?o:c(t,r,n(l,"gte",[e])):s("gte");export const integer=e=>(t,o,r)=>(e=>"number"==typeof e)(t)&&t%1==0?t:c(e,o,n(r,V_INT));export const len=(e,t)=>u(e)&&e>=0?(o,r,l)=>null!==o&&(_(o)||x(o))&&u(o.length)&&o.length===e?o:c(t,r,n(l,"len",[e])):s("len");export const lte=(e,t)=>u(e)||x(e)||a(e)?(o,r,l)=>p(o,e)&&o<=e?o:c(t,r,n(l,"lte",[e])):s("lte");export const maxLen=(e,t)=>u(e)&&e>=0?(o,r,l)=>null!==o&&(_(o)||x(o))&&u(o.length)&&o.length<=e?o:c(t,r,n(l,V_MXLEN,[e])):s(V_MXLEN);export const minLen=(e,t)=>u(e)&&e>=0?(o,r,l)=>null!==o&&(_(o)||x(o))&&u(o.length)&&o.length>=e?o:c(t,r,n(l,V_MNLEN,[e])):s(V_MNLEN);export const notEqual=(e,t)=>(o,r,l)=>o!==e?o:c(t,r,n(l,V_NEQ,[e]));export const number=e=>(t,o,r)=>null!==t&&""!==t&&!d(t)&&(e=>(global||window).isFinite(e))(t)?Number(t):c(e,o,n(r,V_NUM));export const object=(e,r)=>{const l=[],p=V(e);if(p&&Object.keys(e).forEach(o=>l.push([o,t(e[o])])),p&&l.reduce((e,[t,o])=>e&&f(o),!0)||!e){const t=e&&l.map(([e,t])=>[e,consecutive(...t)]);return(l,s,p)=>null!==l&&V(l)?t?t.reduce((e,[t,n])=>(e[t]=n(l[t],s,o(p,t)),e),{}):l:c(r,s,n(p,V_OBJ,[e]))}return s(V_OBJ)};export const object2=(e,r)=>{const l=[],p=d(u=e)&&u.reduce((e,t)=>e&&d(t),!0);var u;if(p&&e.forEach(([e,...o])=>l.push([e,t(o)])),p&&l.reduce((e,[t,o])=>e&&f(o)&&t.length>0,!0)||!e){const t=e&&l.map(([e,t])=>[e,consecutive(...t)]);return(l,s,p)=>null!==l&&V(l)?t?t.reduce((e,[t,n])=>(e[t]=n(l[t],s,o(p,t)),e),{}):l:c(r,s,n(p,V_OBJ,[e]))}return s(V_OBJ)};export const oneOf=(e,t)=>d(e)?(o,r,l)=>null!==o&&e.indexOf(o)>=0?o:c(t,r,n(l,V_OOF,[e])):s(V_OOF);export const string=e=>(t,o,r)=>void 0===t||_(t)||i(t)?c(e,o,n(r,V_STR)):t+"";export const clamp=(e,t)=>o=>o<e&&e||o>t&&t||o;export const withErrors=(e,t)=>(o,n,r)=>{const l=[],c=(e,t)=>l.push({error:e,relevance:t||{value:!0}});return{result:e(o,(e,o,n)=>e&&(i(e)?c(e(o),n):c(e,n))||t&&c(t(o),n),r),errors:l.length>0?l.filter(({relevance:e})=>e.value).map(({error:e})=>e):null}};export const withMeta=e=>(t,o)=>e(t,o,{path:[],_deps:{},params:[]});export const withPromise=e=>(t,o,n)=>new Promise((r,l)=>{const c=e(t,o,n);c.errors?l(c.errors):r(c.result||c)});