export const V_INT="integer";export const V_EQ="equal";export const V_REG="regex";export const V_NEQ="notEqual";export const V_GTE="gte";export const V_LTE="lte";export const V_OOF="oneOf";export const V_LEN="len";export const V_MXLEN="maxLen";export const V_MNLEN="minLen";export const V_FIELDS="fields";export const V_NUM="number";export const V_STR="string";export const V_BLN="bool";export const V_ARR="array";export const V_OBJ="object";export const G_CONS="consecutive";export const G_PRLL="parallel";export const G_OR="or";export const G_TRM="transform";export const S_GDP="getDep";export const S_SDP="setDep";const e=e=>Array.isArray(e)?e:[e],t=(e,t)=>e&&{...e,path:e.path.concat(t?[t]:[])},o=(e,t,o=[])=>e&&{...e,params:o,validator:t},n=(e,t,o)=>o?o._deps[t]=e:e,r=(e,t)=>t?t._deps[e]:null,s=(e,t,o)=>(t&&t(e,o),null),c=e=>{throw e},l=e=>null==e||""===e,p=(e,t)=>typeof e==typeof t,u=e=>void 0!==e,x=e=>Number.isFinite(e),_=e=>"string"==typeof e,a=e=>"boolean"==typeof e,i=e=>"function"==typeof e,V=e=>"object"==typeof e,f=e=>e&&"object"==typeof e&&e.constructor===Object,g=e=>Array.isArray(e),d=e=>e.reduce((e,t)=>e&&i(t),!0);export const consecutive=(...e)=>d(e)?(t,o,n)=>e.reduce((e,t)=>null!==e?t(e,o,n):null,t):c(G_CONS);export const or=(...e)=>d(e)?(t,o,n)=>{let r=null;const s={value:!1};return e.find(e=>(r=e(t,o?(e,t)=>o(e,t,s):null,n),null!==r)),null===r&&(s.value=!0),r}:c("or");export const parallel=(...e)=>d(e)?(t,o,n)=>e.reduce((e,r)=>null!==e?r(t,o,n):(r(t,o,n),null),t):c(G_PRLL);export const transform=(...e)=>d(e)?t=>e.reduce((e,t)=>t(e),t):c(G_TRM);export const getDep=(t,o)=>_(t)&&t.length>0?i(o)?(n,s,l)=>{const p=o(r(t,l));if(!p)return n;const u=e(p);return d(u)?u.reduce((e,t)=>null!==e?t(e,s,l):null,n):c(S_GDP)}:(e,o,n)=>r(t,n):c(S_GDP);export const setDep=(e,t)=>_(e)&&e.length>0?(o,r,s)=>n(u(t)?i(t)?t(s):t:o,e,s):c(S_SDP);export const setVDep=(e,...t)=>(o,r,s)=>(n(t,e,s),t.reduce((e,t)=>null!==e?t(e,r,s):null,o));export const useDefault=(e,...t)=>(o,n,r)=>l(o)?i(e)?e(r):e:t.reduce((e,t)=>null!==e?t(e,n,r):null,o);export const array=(n,r)=>{const l=e(n),p=d(l);if(!n||p){const e=p&&consecutive(...l);return(n,c,l)=>g(n)?e?n.map((o,n)=>e(o,c,t(l,n))):n:s(r,c,o(l,V_ARR,[n]))}return c(V_ARR)};const h=[!1,!0,0,1,"0","1","false","true"];export const bool=e=>(t,n,r)=>{const c=h.indexOf(t);return c>=0?!!(c%2):s(e,n,o(r,V_BLN))};export const equal=(e,t)=>(n,r,c)=>n===e?n:s(t,r,o(c,V_EQ,[e]));const E={op:(e,t)=>t.reduce((t,o)=>t+Number(_(o)?!l(e[o]):E[o[0]](e,o.slice(1))),0),"&":(e,t)=>E.op(e,t)===t.length,"|":(e,t)=>E.op(e,t)>0,"^":(e,t)=>1===E.op(e,t)},N=e=>["&","|","^"].indexOf(e)>=0,m=e=>_(e)&&e.length>0&&!N(e)||g(e)&&e.length>2&&N(e[0])&&e.reduce((e,t,o)=>0===o||e&&m(t),!0);export const fields=(e,t)=>m(e)?(n,r,c)=>f(n)&&E.op(n,[e])>0?n:s(t,r,o(c,"fields",[e])):c("fields");export const gte=(e,t)=>x(e)||_(e)||a(e)?(n,r,c)=>p(n,e)&&n>=e?n:s(t,r,o(c,"gte",[e])):c("gte");export const integer=e=>(t,n,r)=>(e=>"number"==typeof e)(t)&&t%1==0?t:s(e,n,o(r,V_INT));export const len=(e,t)=>x(e)&&e>=0?(n,r,c)=>null!==n&&(V(n)||_(n))&&x(n.length)&&n.length===e?n:s(t,r,o(c,"len",[e])):c("len");export const lte=(e,t)=>x(e)||_(e)||a(e)?(n,r,c)=>p(n,e)&&n<=e?n:s(t,r,o(c,"lte",[e])):c("lte");export const maxLen=(e,t)=>x(e)&&e>=0?(n,r,c)=>null!==n&&(V(n)||_(n))&&x(n.length)&&n.length<=e?n:s(t,r,o(c,V_MXLEN,[e])):c(V_MXLEN);export const minLen=(e,t)=>x(e)&&e>=0?(n,r,c)=>null!==n&&(V(n)||_(n))&&x(n.length)&&n.length>=e?n:s(t,r,o(c,V_MNLEN,[e])):c(V_MNLEN);export const notEqual=(e,t)=>(n,r,c)=>n!==e?n:s(t,r,o(c,V_NEQ,[e]));export const number=e=>(t,n,r)=>null!==t&&""!==t&&!g(t)&&(e=>(global||window).isFinite(e))(t)?Number(t):s(e,n,o(r,V_NUM));export const object=(n,r)=>{const l=[],p=f(n);if(p&&Object.keys(n).forEach(t=>l.push([t,e(n[t])])),p||!n){const e=n&&l.map(([e,t])=>[e,consecutive(...t)]);return(c,l,p)=>null!==c&&f(c)?e?e.reduce((e,[o,n])=>(e[o]=n(c[o],l,t(p,o)),e),{}):c:s(r,l,o(p,V_OBJ,[n]))}return c(V_OBJ)};export const object2=(n,r)=>{const l=[],p=g(u=n)&&u.reduce((e,t)=>e&&g(t),!0);var u;if(p&&n.forEach(([t,...o])=>l.push([t,e(o)])),p&&l.reduce((e,[t])=>e&&t.length>0,!0)||!n){const e=n&&l.map(([e,t])=>[e,consecutive(...t)]);return(c,l,p)=>null!==c&&f(c)?e?e.reduce((e,[o,n])=>(e[o]=n(c[o],l,t(p,o)),e),{}):c:s(r,l,o(p,V_OBJ,[n]))}return c(V_OBJ)};export const oneOf=(e,t)=>g(e)?(n,r,c)=>null!==n&&e.indexOf(n)>=0?n:s(t,r,o(c,V_OOF,[e])):c(V_OOF);export const regex=(e,t)=>e&&e.constructor===RegExp?(n,r,c)=>e.test(n)?n:s(t,r,o(c,V_REG,[e])):c(V_REG);export const string=e=>(t,n,r)=>!u(t)||V(t)||i(t)?s(e,n,o(r,V_STR)):t+"";export const clamp=(e,t)=>o=>o<e?e:o>t?t:o;export const withErrors=(e,t)=>(o,n,r)=>{const s=[],c=(e,t)=>s.push({error:e,relevance:t||{value:!0}});return{result:e(o,(e,o,n)=>e&&(i(e)?c(e(o),n):c(e,n))||t&&c(t(o),n),r),errors:s.length>0?s.filter(({relevance:e})=>e.value).map(({error:e})=>e):null}};export const withMeta=e=>(t,o)=>e(t,o,{path:[],_deps:{},params:[]});export const withPromise=e=>(t,o,n)=>new Promise((r,s)=>{const c=e(t,o,n);c.errors?s(c.errors):r(c.result||c)});