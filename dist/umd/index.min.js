var n=this&&this.__assign||function(){return(n=Object.assign||function(n){for(var r,t=1,u=arguments.length;t<u;t++)for(var e in r=arguments[t])Object.prototype.hasOwnProperty.call(r,e)&&(n[e]=r[e]);return n}).apply(this,arguments)};!function(n){if("object"==typeof module&&"object"==typeof module.exports){var r=n(require,exports);void 0!==r&&(module.exports=r)}else"function"==typeof define&&define.amd&&define(["require","exports"],n)}((function(r,t){Object.defineProperty(t,"__esModule",{value:!0}),t.V_INT="integer",t.V_EQ="equal",t.V_REG="regex",t.V_NEQ="notEqual",t.V_GTE="gte",t.V_LTE="lte",t.V_OOF="oneOf",t.V_LEN="len",t.V_MXLEN="maxLen",t.V_MNLEN="minLen",t.V_FIELDS="fields",t.V_NUM="number",t.V_STR="string",t.V_BLN="bool",t.V_ARR="array",t.V_OBJ="object";var u=function(n){return null==n||""===n},e=function(n){return Array.isArray(n)?n:[n]},o=function(r,t){return r&&n(n({},r),{path:r.path.concat(t?[t]:[])})},i=function(r,t,u){return void 0===u&&(u=[]),r&&n(n({},r),{params:u,validator:t})},c=function(n,r,t){return t?t._deps[r]=n:n},f=function(n,r){return r&&r._deps[n]||null},l=function(n,r,t){return r&&r(n,t),null},a=function(n){throw n},p=function(n,r){return typeof n==typeof r},s=function(n){return Number.isFinite(n)},_=function(n){return"string"==typeof n},v=function(n){return"boolean"==typeof n},V=function(n){return"function"==typeof n},d=function(n){return"object"==typeof n},h=function(n){return n&&"object"==typeof n&&n.constructor===Object},g=function(n){return Array.isArray(n)},E=function(n){return n.reduce((function(n,r){return n&&V(r)}),!0)};t.consecutive=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return function(r,t,u){return n.reduce((function(n,r){return null!==n?r(n,t,u):null}),r)}},t.getDep=function(n,r){return function(t,u,o){return e(r(f(n,o))).reduce((function(n,r){return null!==n?r(n,u,o):null}),t)}},t.mergeDep=function(n){return function(r,t,u){return f(n,u)}},t.or=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return function(r,t,u){var e=null,o={value:!1};return n.find((function(n){return null!==(e=n(r,t?function(n,r){return t(n,r,o)}:null,u))})),null===e&&(o.value=!0),e}},t.parallel=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return function(r,t,u){return n.reduce((function(n,e){return null!==n?e(n,t,u):(e(r,t,u),null)}),r)}},t.setDep=function(n){return function(r,t,u){return c(r,n,u)}},t.setVDep=function(n){for(var r=[],t=1;t<arguments.length;t++)r[t-1]=arguments[t];return function(t,u,e){return c(r,n,e),r.reduce((function(n,r){return null!==n?r(n,u,e):null}),t)}},t.transform=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return function(r,t,u){return n.reduce((function(n,r){return r(n,t,u)}),r)}},t.useDefault=function(n){for(var r=[],t=1;t<arguments.length;t++)r[t-1]=arguments[t];return function(t,e,o){return u(t)?V(n)?n(o):n:r.reduce((function(n,r){return null!==n?r(n,e,o):null}),t)}},t.array=function(n,r){var u=e(n),c=E(u);if(!n||c){var f=c&&t.consecutive.apply(void 0,u);return function(n,u,e){return g(n)?f?n.map((function(n,r){return f(n,u,o(e,r))})):n:l(r,u,i(e,t.V_ARR,[n]))}}return a(t.V_ARR)};var m=[!1,!0,0,1,"0","1","false","true"];t.bool=function(n){return function(r,u,e){var o=m.indexOf(r);return o>=0?!!(o%2):l(n,u,i(e,t.V_BLN))}},t.equal=function(n,r){return function(u,e,o){return u===n?u:l(r,e,i(o,t.V_EQ,[n]))}};var y={op:function(n,r){return r.reduce((function(r,t){return r+Number(_(t)?!u(n[t]):y[t[0]](n,t.slice(1)))}),0)},"&":function(n,r){return y.op(n,r)===r.length},"|":function(n,r){return y.op(n,r)>0},"^":function(n,r){return 1===y.op(n,r)}},N=function(n){return["&","|","^"].indexOf(n)>=0},b=function(n){return _(n)&&n.length>0&&!N(n)||g(n)&&n.length>2&&N(n[0])&&n.reduce((function(n,r,t){return 0===t||n&&b(r)}),!0)};t.fields=function(n,r){return b(n)?function(u,e,o){return h(u)&&y.op(u,[n])>0?u:l(r,e,i(o,t.V_FIELDS,[n]))}:a(t.V_FIELDS)},t.gte=function(n,r){return s(n)||_(n)||v(n)?function(u,e,o){return p(u,n)&&u>=n?u:l(r,e,i(o,t.V_GTE,[n]))}:a(t.V_GTE)},t.integer=function(n){return function(r,u,e){return function(n){return"number"==typeof n}(r)&&r%1==0?r:l(n,u,i(e,t.V_INT))}},t.len=function(n,r){return s(n)&&n>=0?function(u,e,o){return null!==u&&(d(u)||_(u))&&s(u.length)&&u.length===n?u:l(r,e,i(o,t.V_LEN,[n]))}:a(t.V_LEN)},t.lte=function(n,r){return s(n)||_(n)||v(n)?function(u,e,o){return p(u,n)&&u<=n?u:l(r,e,i(o,t.V_LTE,[n]))}:a(t.V_LTE)},t.maxLen=function(n,r){return s(n)&&n>=0?function(u,e,o){return null!==u&&(d(u)||_(u))&&s(u.length)&&u.length<=n?u:l(r,e,i(o,t.V_MXLEN,[n]))}:a(t.V_MXLEN)},t.minLen=function(n,r){return s(n)&&n>=0?function(u,e,o){return null!==u&&(d(u)||_(u))&&s(u.length)&&u.length>=n?u:l(r,e,i(o,t.V_MNLEN,[n]))}:a(t.V_MNLEN)},t.notEqual=function(n,r){return function(u,e,o){return u!==n?u:l(r,e,i(o,t.V_NEQ,[n]))}},t.number=function(n){return function(r,u,e){return null!==r&&""!==r&&!g(r)&&function(n){return(global||window).isFinite(n)}(r)?Number(r):l(n,u,i(e,t.V_NUM))}},t.object=function(n,r){var u=[],c=h(n);if(c&&Object.keys(n).forEach((function(r){return u.push([r,e(n[r])])})),c&&u.reduce((function(n,r){r[0];var t=r[1];return n&&E(t)}),!0)||!n){var f=n&&u.map((function(n){var r=n[0],u=n[1];return[r,t.consecutive.apply(void 0,u)]}));return function(u,e,c){return null!==u&&h(u)?f?f.reduce((function(n,r){var t=r[0],i=r[1];return n[t]=i(u[t],e,o(c,t)),n}),{}):u:l(r,e,i(c,t.V_OBJ,[n]))}}return a(t.V_OBJ)};t.object2=function(n,r){var u,c=[],f=g(u=n)&&u.reduce((function(n,r){return n&&g(r)}),!0);if(f&&n.forEach((function(n){var r=n[0],t=n.slice(1);return c.push([r,e(t)])})),f&&c.reduce((function(n,r){var t=r[0],u=r[1];return n&&E(u)&&t.length>0}),!0)||!n){var p=n&&c.map((function(n){var r=n[0],u=n[1];return[r,t.consecutive.apply(void 0,u)]}));return function(u,e,c){return null!==u&&h(u)?p?p.reduce((function(n,r){var t=r[0],i=r[1];return n[t]=i(u[t],e,o(c,t)),n}),{}):u:l(r,e,i(c,t.V_OBJ,[n]))}}return a(t.V_OBJ)},t.oneOf=function(n,r){return g(n)?function(u,e,o){return null!==u&&n.indexOf(u)>=0?u:l(r,e,i(o,t.V_OOF,[n]))}:a(t.V_OOF)},t.regex=function(n,r){return n&&n.constructor===RegExp?function(u,e,o){return n.test(u)?u:l(r,e,i(o,t.V_REG,[n]))}:a(t.V_REG)},t.string=function(n){return function(r,u,e){return void 0===r||d(r)||V(r)?l(n,u,i(e,t.V_STR)):r+""}},t.clamp=function(n,r){return function(t){return t<n?n:t>r?r:t}},t.withErrors=function(n,r){return function(t,u,e){var o=[],i=function(n,r){return o.push({error:n,relevance:r||{value:!0}})};return{result:n(t,(function(n,t,u){return n&&(V(n)?i(n(t),u):i(n,u))||r&&i(r(t),u)}),e),errors:o.length>0?o.filter((function(n){return n.relevance.value})).map((function(n){return n.error})):null}}},t.withMeta=function(n){return function(r,t){return n(r,t,{path:[],_deps:{},params:[]})}},t.withPromise=function(n){return function(r,t,u){return new Promise((function(e,o){var i=n(r,t,u);i.errors?o(i.errors):e(i.result||i)}))}}}));