var n=this&&this.__assign||function(){return(n=Object.assign||function(n){for(var r,t=1,u=arguments.length;t<u;t++)for(var e in r=arguments[t])Object.prototype.hasOwnProperty.call(r,e)&&(n[e]=r[e]);return n}).apply(this,arguments)};!function(n){if("object"==typeof module&&"object"==typeof module.exports){var r=n(require,exports);void 0!==r&&(module.exports=r)}else"function"==typeof define&&define.amd&&define(["require","exports"],n)}((function(r,t){Object.defineProperty(t,"__esModule",{value:!0}),t.V_INT="integer",t.V_EQ="equal",t.V_REG="regex",t.V_NEQ="notEqual",t.V_GTE="gte",t.V_LTE="lte",t.V_OOF="oneOf",t.V_LEN="len",t.V_MXLEN="maxLen",t.V_MNLEN="minLen",t.V_FIELDS="fields",t.V_NUM="number",t.V_STR="string",t.V_BLN="bool",t.V_ARR="array",t.V_OBJ="object",t.G_CONS="consecutive",t.G_PRLL="parallel",t.G_OR="or";var u=function(n){return Array.isArray(n)?n:[n]},e=function(r,t){return r&&n(n({},r),{path:r.path.concat(t?[t]:[])})},o=function(r,t,u){return void 0===u&&(u=[]),r&&n(n({},r),{params:u,validator:t})},i=function(n,r,t){return t?t._deps[r]=n:n},c=function(n,r){return r&&r._deps[n]||null},f=function(n,r,t){return r&&r(n,t),null},l=function(n){throw n},a=function(n){return null==n||""===n},_=function(n,r){return typeof n==typeof r},p=function(n){return void 0!==n},s=function(n){return Number.isFinite(n)},v=function(n){return"string"==typeof n},V=function(n){return"boolean"==typeof n},d=function(n){return"function"==typeof n},h=function(n){return"object"==typeof n},g=function(n){return n&&"object"==typeof n&&n.constructor===Object},E=function(n){return Array.isArray(n)},O=function(n){return n.reduce((function(n,r){return n&&d(r)}),!0)};t.consecutive=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return O(n)?function(r,t,u){return n.reduce((function(n,r){return null!==n?r(n,t,u):null}),r)}:l(t.G_CONS)},t.or=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return O(n)?function(r,t,u){var e=null,o={value:!1};return n.find((function(n){return null!==(e=n(r,t?function(n,r){return t(n,r,o)}:null,u))})),null===e&&(o.value=!0),e}:l(t.G_OR)},t.parallel=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return O(n)?function(r,t,u){return n.reduce((function(n,e){return null!==n?e(r,t,u):(e(r,t,u),null)}),r)}:l(t.G_PRLL)},t.transform=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return function(r,t,u){return n.reduce((function(n,r){return r(n,t,u)}),r)}},t.getDep=function(n,r){return function(t,e,o){return u(r(c(n,o))).reduce((function(n,r){return null!==n?r(n,e,o):null}),t)}},t.mergeDep=function(n){return function(r,t,u){return c(n,u)}},t.setDep=function(n,r){return function(t,u,e){return i(p(r)?r:t,n,e)}},t.setVDep=function(n){for(var r=[],t=1;t<arguments.length;t++)r[t-1]=arguments[t];return function(t,u,e){return i(r,n,e),r.reduce((function(n,r){return null!==n?r(n,u,e):null}),t)}},t.useDefault=function(n){for(var r=[],t=1;t<arguments.length;t++)r[t-1]=arguments[t];return function(t,u,e){return a(t)?d(n)?n(e):n:r.reduce((function(n,r){return null!==n?r(n,u,e):null}),t)}},t.array=function(n,r){var i=u(n),c=O(i);if(!n||c){var a=c&&t.consecutive.apply(void 0,i);return function(n,u,i){return E(n)?a?n.map((function(n,r){return a(n,u,e(i,r))})):n:f(r,u,o(i,t.V_ARR,[n]))}}return l(t.V_ARR)};var m=[!1,!0,0,1,"0","1","false","true"];t.bool=function(n){return function(r,u,e){var i=m.indexOf(r);return i>=0?!!(i%2):f(n,u,o(e,t.V_BLN))}},t.equal=function(n,r){return function(u,e,i){return u===n?u:f(r,e,o(i,t.V_EQ,[n]))}};var y={op:function(n,r){return r.reduce((function(r,t){return r+Number(v(t)?!a(n[t]):y[t[0]](n,t.slice(1)))}),0)},"&":function(n,r){return y.op(n,r)===r.length},"|":function(n,r){return y.op(n,r)>0},"^":function(n,r){return 1===y.op(n,r)}},L=function(n){return["&","|","^"].indexOf(n)>=0},N=function(n){return v(n)&&n.length>0&&!L(n)||E(n)&&n.length>2&&L(n[0])&&n.reduce((function(n,r,t){return 0===t||n&&N(r)}),!0)};t.fields=function(n,r){return N(n)?function(u,e,i){return g(u)&&y.op(u,[n])>0?u:f(r,e,o(i,t.V_FIELDS,[n]))}:l(t.V_FIELDS)},t.gte=function(n,r){return s(n)||v(n)||V(n)?function(u,e,i){return _(u,n)&&u>=n?u:f(r,e,o(i,t.V_GTE,[n]))}:l(t.V_GTE)},t.integer=function(n){return function(r,u,e){return function(n){return"number"==typeof n}(r)&&r%1==0?r:f(n,u,o(e,t.V_INT))}},t.len=function(n,r){return s(n)&&n>=0?function(u,e,i){return null!==u&&(h(u)||v(u))&&s(u.length)&&u.length===n?u:f(r,e,o(i,t.V_LEN,[n]))}:l(t.V_LEN)},t.lte=function(n,r){return s(n)||v(n)||V(n)?function(u,e,i){return _(u,n)&&u<=n?u:f(r,e,o(i,t.V_LTE,[n]))}:l(t.V_LTE)},t.maxLen=function(n,r){return s(n)&&n>=0?function(u,e,i){return null!==u&&(h(u)||v(u))&&s(u.length)&&u.length<=n?u:f(r,e,o(i,t.V_MXLEN,[n]))}:l(t.V_MXLEN)},t.minLen=function(n,r){return s(n)&&n>=0?function(u,e,i){return null!==u&&(h(u)||v(u))&&s(u.length)&&u.length>=n?u:f(r,e,o(i,t.V_MNLEN,[n]))}:l(t.V_MNLEN)},t.notEqual=function(n,r){return function(u,e,i){return u!==n?u:f(r,e,o(i,t.V_NEQ,[n]))}},t.number=function(n){return function(r,u,e){return null!==r&&""!==r&&!E(r)&&function(n){return(global||window).isFinite(n)}(r)?Number(r):f(n,u,o(e,t.V_NUM))}},t.object=function(n,r){var i=[],c=g(n);if(c&&Object.keys(n).forEach((function(r){return i.push([r,u(n[r])])})),c||!n){var a=n&&i.map((function(n){var r=n[0],u=n[1];return[r,t.consecutive.apply(void 0,u)]}));return function(u,i,c){return null!==u&&g(u)?a?a.reduce((function(n,r){var t=r[0],o=r[1];return n[t]=o(u[t],i,e(c,t)),n}),{}):u:f(r,i,o(c,t.V_OBJ,[n]))}}return l(t.V_OBJ)};t.object2=function(n,r){var i,c=[],a=E(i=n)&&i.reduce((function(n,r){return n&&E(r)}),!0);if(a&&n.forEach((function(n){var r=n[0],t=n.slice(1);return c.push([r,u(t)])})),a&&c.reduce((function(n,r){var t=r[0];return n&&t.length>0}),!0)||!n){var _=n&&c.map((function(n){var r=n[0],u=n[1];return[r,t.consecutive.apply(void 0,u)]}));return function(u,i,c){return null!==u&&g(u)?_?_.reduce((function(n,r){var t=r[0],o=r[1];return n[t]=o(u[t],i,e(c,t)),n}),{}):u:f(r,i,o(c,t.V_OBJ,[n]))}}return l(t.V_OBJ)},t.oneOf=function(n,r){return E(n)?function(u,e,i){return null!==u&&n.indexOf(u)>=0?u:f(r,e,o(i,t.V_OOF,[n]))}:l(t.V_OOF)},t.regex=function(n,r){return n&&n.constructor===RegExp?function(u,e,i){return n.test(u)?u:f(r,e,o(i,t.V_REG,[n]))}:l(t.V_REG)},t.string=function(n){return function(r,u,e){return!p(r)||h(r)||d(r)?f(n,u,o(e,t.V_STR)):r+""}},t.clamp=function(n,r){return function(t){return t<n?n:t>r?r:t}},t.withErrors=function(n,r){return function(t,u,e){var o=[],i=function(n,r){return o.push({error:n,relevance:r||{value:!0}})};return{result:n(t,(function(n,t,u){return n&&(d(n)?i(n(t),u):i(n,u))||r&&i(r(t),u)}),e),errors:o.length>0?o.filter((function(n){return n.relevance.value})).map((function(n){return n.error})):null}}},t.withMeta=function(n){return function(r,t){return n(r,t,{path:[],_deps:{},params:[]})}},t.withPromise=function(n){return function(r,t,u){return new Promise((function(e,o){var i=n(r,t,u);i.errors?o(i.errors):e(i.result||i)}))}}}));